<ion-header>
  <ion-toolbar>
    <ion-title>Profile</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <div class="login-container" *ngIf="!isSessionExist">
    <div class="login">
      <div class="login-message">
        <span class="appname">Best Movies</span>
        <span class="messsage">Please login to app for see your account.</span>
      </div>
      <div class="login-button">
        <button class="btn" (click)="login();">Login</button>
      </div>
    </div>
  </div>

  <div *ngIf="isSessionExist">
    <div class="account-info">
      <div class="account-picture">
        <img src="https://www.gravatar.com/avatar/bfe90ba6a545766dfba93673d254c730" onError="this.src = '../assets/images/no-image-poster.png'" />
      </div>

      <div class="account-name">
        <span>{{loggedUser?.username}}</span>
      </div>
    </div>

    <div class="account-menu">
      <!-- <div class="menu-item" [ngClass]="{'active': selectedMenu == 'watchlist'}">
        <span>Summary</span>
      </div> -->

      <div class="menu-item" [ngClass]="{'active': selectedMenu == 'list'}" (click)="changeTab('list')">
        <span>Lists</span>
      </div>

      <div class="menu-item" [ngClass]="{'active': selectedMenu == 'watchlist'}" (click)="changeTab('watchlist')">
        <span>Watchlist</span>
      </div>

      <div class="menu-item" [ngClass]="{'active': selectedMenu == 'favorite'}" (click)="changeTab('favorite')">
        <span>Favorites</span>
      </div>

    </div>

    <div class="menu-content">

      <div class="user-list-content" *ngIf="selectedMenu == 'list'">
        <div class="list" *ngFor="let list of userLists">
          <span class="title">
            {{list.name}}
          </span>
          <span class="sub-title">
            {{list.item_count}} item - {{list.list_type}}
          </span>
        </div>
      </div>

      <div class="user-watchlist-content" *ngIf="selectedMenu == 'watchlist'">
        <div class="watchlist-item" *ngFor="let movie of userWatchList">
          <div class="item-image">
              <img src="https://image.tmdb.org/t/p/w500/{{movie.poster_path}}" onError="this.src = '../assets/images/no-image-poster.png'" />
          </div>
          <div class="title">
            <span>{{movie.title}} ({{movie.release_date | date: 'yyyy'}})</span>
          </div>
        </div>
      </div>

      <div class="user-watchlist-content" *ngIf="selectedMenu == 'favorite'">
          <div class="watchlist-item" *ngFor="let movie of userFavoriteList">
            <div class="item-image">
                <img src="https://image.tmdb.org/t/p/w500/{{movie.poster_path}}" onError="this.src = '../assets/images/no-image-poster.png'" />
            </div>
            <div class="title">
              <span>{{movie.title}} ({{movie.release_date | date: 'yyyy'}})</span>
            </div>
          </div>
        </div>

    </div>





  </div>



</ion-content>